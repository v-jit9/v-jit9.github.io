<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>To do Login</title>
        <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    </head>
    <body>
    </body>
	<script>
	// LIFFの初期化を行う
	liff.init({
	// 自分のLIFF ID（URLから『https://liff.line.me/』を除いた文字列）を入力する
	liffId: "1656164357-kmGXRm1X"

	}).then(() => { // 初期化完了. 以降はLIFF SDKの各種メソッドを利用できる

	if (!liff.isLoggedIn()) {
		liff.login();
	}

	// 利用者のLINEアカウントのプロフィール名を取得
	liff.getProfile().then(profile => {

	// プロフィール名
	const name = profile.displayName

	// HTMLに挿入
	document.querySelector("#name").innerText = name


	if (liff.isApiAvailable('shareTargetPicker')) {
 		 liff.shareTargetPicker([
    			{
			      'type': 'text',
			      'text': 'Hello, World!'
    			}
		  ])
		    .then(function (res) {
			      if (res) {
			        // succeeded in sending a message through TargetPicker
			        console.log(`[${res.status}] Message sent!`)
			      } else {
				        const [majorVer, minorVer] = (liff.getLineVersion() || "").split('.');
				        if (parseInt(majorVer) == 10 && parseInt(minorVer) < 11) {
				          // LINE 10.3.0 - 10.10.0
				          // Old LINE will access here regardless of user's action
				          console.log('TargetPicker was opened at least. Whether succeeded to send message is unclear')
				        } else {
				          // LINE 10.11.0 -
				          // sending message canceled
				          console.log('TargetPicker was closed!')
				        }
				      }
				    }).catch(function (error) {
				      // something went wrong before sending a message
				      console.log('something wrong happen')
				    })
				}
			})
			})
	
	</script>
</html>
